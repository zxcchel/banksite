<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Bank</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>
<body>
  <div class="wrapper">
    <!-- 1. –î–æ–≥–æ–≤–æ—Ä -->
    <div class="side-box">
      <h3><i class="fa-solid fa-file-contract"></i> –î–æ–≥–æ–≤–æ—Ä</h3>
      <div id="contract" class="contract-box box-content"></div>
    </div>
    <!-- 2. –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ -->
    <div class="card">
  <h1><i class="fa-solid fa-vault"></i> UltraBank</h1>
  <input type="text" id="name" placeholder="–ò–º—è –≤–∫–ª–∞–¥—á–∏–∫–∞">
  <select id="type">
    <option value="0.05">–°—Ä–æ—á–Ω—ã–π –≤–∫–ª–∞–¥ (5%)</option>
    <option value="0.02">–î–æ –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (2%)</option>
  </select>
  <input type="number" id="amount" placeholder="–°—É–º–º–∞, ‚ÇΩ">
  
  <!-- –ù–æ–≤—ã–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±–ª–æ–∫ –∫–Ω–æ–ø–æ–∫ -->
  <div class="actions-grid">
    <button class="action-btn deposit" onclick="deposit()">
      <i class="fa-solid fa-plus"></i> –ü–æ–ø–æ–ª–Ω–∏—Ç—å
    </button>
    <button class="action-btn withdraw" onclick="withdraw()">
      <i class="fa-solid fa-minus"></i> –°–Ω—è—Ç—å
    </button>
    <button class="action-btn interest" onclick="addInterest()">
      <i class="fa-solid fa-percentage"></i> –ù–∞—á–∏—Å–ª–∏—Ç—å<br>–ø—Ä–æ—Ü–µ–Ω—Ç—ã
    </button>
  </div>
  
  <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">0.00</span> ‚ÇΩ</div>

  <div class="contract-controls">
    <button class="action-btn contract" onclick="generateContract()">
      <i class="fa-solid fa-file-signature"></i> –û—Ñ–æ—Ä–º–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä
    </button>
    <button class="small-btn clear" onclick="clearData()">
      <i class="fa-solid fa-trash-can"></i> –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë
    </button>
  </div>
</div>

    <!-- 3. –ò—Å—Ç–æ—Ä–∏—è -->
    <div class="side-box">
      <h3><i class="fa-solid fa-clock-rotate-left"></i> –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
      <div id="history" class="history-box box-content"></div>
    </div>

    <!-- 4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="side-box">
      <h3><i class="fa-solid fa-chart-line"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
      <div id="stats" class="box-content">
        <p>–í—Å–µ–≥–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–æ: <span id="sumDep">0</span> ‚ÇΩ</p>
        <p>–í—Å–µ–≥–æ —Å–Ω—è—Ç–æ: <span id="sumWith">0</span> ‚ÇΩ</p>
        <p>–ù–∞—á–∏—Å–ª–µ–Ω–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤: <span id="sumInt">0</span> ‚ÇΩ</p>
      </div>
    </div>
  </div>

  <script>
    let balance   = parseFloat(localStorage.getItem('balance')) || 0;
    let savedName = localStorage.getItem('name') || '';
    let history   = JSON.parse(localStorage.getItem('history')) || [];
    let stats     = JSON.parse(localStorage.getItem('stats'))   || { dep:0, with:0, int:0 };

    document.getElementById('balance').textContent = balance.toFixed(2);
    document.getElementById('name').value         = savedName;
    updateHistory(); updateStats();
    
    // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener('DOMContentLoaded', () => {
      const elements = document.querySelectorAll('.side-box, .card');
      elements.forEach((el, index) => {
        el.style.animationDelay = `${index * 0.15}s`;
      });
    });

    function saveAll() {
      localStorage.setItem('balance', balance);
      localStorage.setItem('name', document.getElementById('name').value);
      localStorage.setItem('history', JSON.stringify(history));
      localStorage.setItem('stats', JSON.stringify(stats));
      
      // –≠—Ñ—Ñ–µ–∫—Ç –ø—É–ª—å—Å–∞—Ü–∏–∏ –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
      const balanceEl = document.querySelector('.balance');
      balanceEl.style.animation = 'none';
      setTimeout(() => {
        balanceEl.style.animation = 'pulse 0.5s ease-in-out';
      }, 10);
    }

    function deposit() {
      const amt = parseFloat(document.getElementById('amount').value);
      if (!amt||amt<=0) return showNotification("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –±–æ–ª—å—à–µ 0");
      balance += amt; stats.dep += amt;
      pushHist(`+${amt.toFixed(2)} ‚ÇΩ ‚Äî –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ`);
      refresh();
      animateValue('balance', balance-amt, balance, 600);
    }

    function withdraw() {
      const amt = parseFloat(document.getElementById('amount').value);
      if (!amt||amt<=0) return showNotification("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –±–æ–ª—å—à–µ 0");
      if (amt>balance) return showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤");
      balance -= amt; stats.with += amt;
      pushHist(`-${amt.toFixed(2)} ‚ÇΩ ‚Äî —Å–Ω—è—Ç–∏–µ`);
      refresh();
      animateValue('balance', balance+amt, balance, 600);
    }

    function addInterest() {
      const rate = parseFloat(document.getElementById('type').value);
      const interest = balance * rate;
      const oldBalance = balance;
      balance += interest; stats.int += interest;
      pushHist(`+${interest.toFixed(2)} ‚ÇΩ ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç—ã (${rate*100}%)`);
      refresh();
      animateValue('balance', oldBalance, balance, 800);
    }

    function generateContract() {
      const name = document.getElementById('name').value.trim();
      if (!name) return showNotification("–£–∫–∞–∂–∏—Ç–µ –∏–º—è –≤–∫–ª–∞–¥—á–∏–∫–∞");
      const rateText = (parseFloat(document.getElementById('type').value)===0.05?"5%":"2%");
      const date = new Date().toLocaleString();
      const txt = `üìÑ –î–æ–≥–æ–≤–æ—Ä –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ –≤–∫–ª–∞–¥–∞\n\n–í–∫–ª–∞–¥—á–∏–∫: ${name}\n–¢–∏–ø –≤–∫–ª–∞–¥–∞: ${rateText}\n–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: ${balance.toFixed(2)} ‚ÇΩ\n–î–∞—Ç–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è: ${date}\n\n`;
      document.getElementById('contract').textContent = txt;
      pushHist("üìÑ –î–æ–≥–æ–≤–æ—Ä –æ—Ñ–æ—Ä–º–ª–µ–Ω");
      saveAll();
    }

    function pushHist(msg){
      history.unshift(`[${new Date().toLocaleTimeString()}] ${msg}`);
      if (history.length>20) history.pop();
    }
    function updateHistory(){
      document.getElementById('history').textContent = history.join("\n");
    }
    function updateStats(){
      document.getElementById('sumDep').textContent  = stats.dep.toFixed(2);
      document.getElementById('sumWith').textContent = stats.with.toFixed(2);
      document.getElementById('sumInt').textContent  = stats.int.toFixed(2);
    }

    function clearData(){
      if (!confirm("–°—Ç–µ—Ä–µ—Ç—å –≤—Å—ë?")) return;
      balance=0; history=[]; stats={dep:0,with:0,int:0};
      document.getElementById('contract').textContent = "";
      document.getElementById('name').value = "";
      refresh(); localStorage.clear();
    }

    function refresh(){
      document.getElementById('balance').textContent = balance.toFixed(2);
      updateHistory(); updateStats(); saveAll();
    }

    // –ê–Ω–∏–º–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
    function animateValue(id, start, end, duration) {
      const obj = document.getElementById(id);
      const range = end - start;
      let startTime = null;
      function step(timestamp) {
        if (!startTime) startTime = timestamp;
        const progress = Math.min((timestamp - startTime) / duration, 1);
        obj.textContent = (start + range * progress).toFixed(2);
        if (progress < 1) {
          requestAnimationFrame(step);
        } else {
          obj.textContent = end.toFixed(2);
        }
      }
      requestAnimationFrame(step);
    }

    // –ö—Ä–∞—Å–∏–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (toast)
    function showNotification(msg) {
      let toast = document.createElement('div');
      toast.textContent = msg;
      toast.style.position = 'fixed';
      toast.style.bottom = '50px';
      toast.style.left = '50%';
      toast.style.transform = 'translateX(-50%)';
      toast.style.background = 'linear-gradient(135deg,#6c5ce7,#00cec9)';
      toast.style.color = '#fff';
      toast.style.padding = '16px 32px';
      toast.style.borderRadius = '16px';
      toast.style.boxShadow = '0 4px 32px #00cec966';
      toast.style.fontSize = '1.15rem';
      toast.style.fontWeight = '600';
      toast.style.zIndex = 9999;
      toast.style.opacity = '0';
      toast.style.transition = 'opacity 0.3s cubic-bezier(.65,.29,.45,1)';
      document.body.appendChild(toast);
      setTimeout(() => toast.style.opacity = '1', 50);
      setTimeout(() => {
        toast.style.opacity = '0';
        setTimeout(() => document.body.removeChild(toast), 350);
      }, 2200);
    }

    // –ü—É–ª—å—Å–∞—Ü–∏—è –±–∞–ª–∞–Ω—Å–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
    const style = document.createElement('style');
    style.innerHTML = `
      @keyframes pulse {
        0% { box-shadow: 0 0 0 0 #81ecec55; }
        70% { box-shadow: 0 0 12px 10px #81ecec22;}
        100%{ box-shadow: 0 0 0 0 #81ecec00; }
      }
      .balance {
        animation-duration: 0.5s;
      }
    `;
    document.head.appendChild(style);

  </script>
</body>
</html>
